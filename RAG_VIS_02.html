<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAG ì¦ê°• ê³¼ì • ì²´í—˜í•˜ê¸°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        h1 {
            text-align: center;
            color: white;
            margin-bottom: 30px;
            font-size: 2.5em;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.2);
        }

        .subtitle {
            text-align: center;
            color: rgba(255,255,255,0.9);
            margin-bottom: 40px;
            font-size: 1.2em;
        }

        .quick-examples {
            background: white;
            border-radius: 20px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .quick-examples h3 {
            margin-bottom: 15px;
            color: #667eea;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .example-buttons {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 10px;
        }

        .example-btn {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            border: none;
            padding: 12px 20px;
            border-radius: 10px;
            cursor: pointer;
            transition: transform 0.2s;
            font-size: 0.95em;
        }

        .example-btn:hover {
            transform: translateY(-2px);
        }

        .main-content {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        .section {
            background: white;
            border-radius: 20px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .section-title {
            font-size: 1.5em;
            margin-bottom: 20px;
            color: #333;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .query-input {
            width: 100%;
            padding: 15px;
            border: 2px solid #e0e0e0;
            border-radius: 10px;
            font-size: 1.1em;
            margin-bottom: 15px;
            transition: border-color 0.3s;
        }

        .query-input:focus {
            outline: none;
            border-color: #667eea;
        }

        .button {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 10px;
            font-size: 1.1em;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
            width: 100%;
        }

        .button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .button:active {
            transform: translateY(0);
        }

        .data-box {
            background: #f8f9fa;
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            min-height: 150px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            line-height: 1.6;
            white-space: pre-wrap;
            max-height: 400px;
            overflow-y: auto;
            border: 2px solid #e0e0e0;
        }

        .step-indicator {
            display: flex;
            justify-content: space-around;
            margin-bottom: 30px;
            padding: 20px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .step {
            text-align: center;
            flex: 1;
            padding: 15px;
            position: relative;
        }

        .step-number {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: #e0e0e0;
            color: #999;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 10px;
            font-size: 1.5em;
            font-weight: bold;
            transition: all 0.3s;
        }

        .step.active .step-number {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            transform: scale(1.1);
        }

        .step-label {
            font-size: 0.9em;
            color: #666;
        }

        .step.active .step-label {
            color: #667eea;
            font-weight: bold;
        }

        .step-arrow {
            position: absolute;
            right: -20px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 2em;
            color: #e0e0e0;
        }

        .step:last-child .step-arrow {
            display: none;
        }

        .stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .stat-card {
            background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);
            color: white;
            padding: 20px;
            border-radius: 15px;
            text-align: center;
        }

        .stat-value {
            font-size: 2em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        .loading {
            text-align: center;
            padding: 40px;
            color: #999;
        }

        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 15px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        @media (max-width: 968px) {
            .main-content {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>ğŸ” RAG ì¦ê°• ê³¼ì • ì²´í—˜í•˜ê¸°</h1>
        <p class="subtitle">ê²€ìƒ‰ëœ ì •ë³´ê°€ ì–´ë–»ê²Œ AIê°€ ì´í•´í•˜ê¸° ì¢‹ì€ í˜•íƒœë¡œ ë³€í™˜ë˜ëŠ”ì§€ í™•ì¸í•´ë³´ì„¸ìš”!</p>

        <!-- ë¹ ë¥¸ ì˜ˆì œ ì„ íƒ -->
        <div class="quick-examples">
            <h3>ğŸ’¡ ë¹ ë¥¸ ì˜ˆì œ ì„ íƒ</h3>
            <div class="example-buttons">
                <button class="example-btn" onclick="setExample('120ë§Œì›ëŒ€ ë…¸íŠ¸ë¶ ì¶”ì²œí•´ì¤˜')">ğŸ’» ë…¸íŠ¸ë¶ ê²€ìƒ‰</button>
                <button class="example-btn" onclick="setExample('150ë§Œì›ëŒ€ 65ì¸ì¹˜ TV ì°¾ì•„ì¤˜')">ğŸ“º TV ê²€ìƒ‰</button>
                <button class="example-btn" onclick="setExample('30ë§Œì›ëŒ€ ì—¬í–‰ìš© ê°€ë°© ì¶”ì²œ')">ğŸ’ ê°€ë°© ê²€ìƒ‰</button>
                <button class="example-btn" onclick="setExample('ê°€ë²¼ìš´ ë…¸íŠ¸ë¶ ì°¾ì•„ì¤˜')">âš–ï¸ ì¡°ê±´ë³„ ê²€ìƒ‰</button>
                <button class="example-btn" onclick="setExample('ì‚¼ì„± ì œí’ˆ ì¶”ì²œí•´ì¤˜')">ğŸ¢ ë¸Œëœë“œ ê²€ìƒ‰</button>
            </div>
        </div>

        <!-- ë‹¨ê³„ í‘œì‹œ -->
        <div class="step-indicator">
            <div class="step" id="step1">
                <div class="step-number">1</div>
                <div class="step-label">ê²€ìƒ‰ ê²°ê³¼</div>
                <div class="step-arrow">â†’</div>
            </div>
            <div class="step" id="step2">
                <div class="step-number">2</div>
                <div class="step-label">í•„í„°ë§</div>
                <div class="step-arrow">â†’</div>
            </div>
            <div class="step" id="step3">
                <div class="step-number">3</div>
                <div class="step-label">êµ¬ì¡°í™”</div>
                <div class="step-arrow">â†’</div>
            </div>
            <div class="step" id="step4">
                <div class="step-number">4</div>
                <div class="step-label">ì»¨í…ìŠ¤íŠ¸ ìƒì„±</div>
            </div>
        </div>

        <!-- ë©”ì¸ ì½˜í…ì¸  -->
        <div class="main-content">
            <!-- ì™¼ìª½: ì…ë ¥ ë° ì›ë³¸ ë°ì´í„° -->
            <div class="section">
                <div class="section-title">
                    <span>ğŸ’¬</span>
                    <span>ì‚¬ìš©ì ì§ˆë¬¸</span>
                </div>
                <input 
                    type="text" 
                    class="query-input" 
                    id="userQuery" 
                    placeholder="ì˜ˆ: 120ë§Œì›ëŒ€ ë…¸íŠ¸ë¶ ì¶”ì²œí•´ì¤˜"
                    value="120ë§Œì›ëŒ€ ë…¸íŠ¸ë¶ ì¶”ì²œí•´ì¤˜"
                >
                <button class="button" onclick="startAugmentation()">ğŸš€ ì¦ê°• ê³¼ì • ì‹œì‘</button>

                <div class="section-title" style="margin-top: 30px;">
                    <span>ğŸ“¦</span>
                    <span>ì›ë³¸ ê²€ìƒ‰ ê²°ê³¼</span>
                </div>
                <div class="data-box" id="rawData">ë°ì´í„°ë² ì´ìŠ¤ì—ì„œ ê²€ìƒ‰ëœ ì›ë³¸ ì •ë³´ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...</div>

                <div class="stats" id="stats" style="display: none;">
                    <div class="stat-card">
                        <div class="stat-value" id="totalItems">0</div>
                        <div class="stat-label">ì „ì²´ í•­ëª©</div>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #4facfe 0%, #00f2fe 100%);">
                        <div class="stat-value" id="filteredItems">0</div>
                        <div class="stat-label">í•„í„°ë§ í›„</div>
                    </div>
                    <div class="stat-card" style="background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%);">
                        <div class="stat-value" id="relevanceScore">0%</div>
                        <div class="stat-label">ê´€ë ¨ë„</div>
                    </div>
                </div>
            </div>

            <!-- ì˜¤ë¥¸ìª½: ì¦ê°• ê²°ê³¼ -->
            <div class="section">
                <div class="section-title">
                    <span>âœ¨</span>
                    <span>ì¦ê°• ê²°ê³¼</span>
                </div>
                <div class="data-box" id="augmentedData">ì¦ê°• ê³¼ì •ì´ ì§„í–‰ë˜ë©´ ê²°ê³¼ê°€ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤...</div>
            </div>
        </div>
    </div>

    <script>
        // í™•ì¥ëœ ìƒ˜í”Œ ë°ì´í„°ë² ì´ìŠ¤
        const database = [
            // ë…¸íŠ¸ë¶
            {
                id: 1,
                name: 'ì‚¼ì„± ê°¤ëŸ­ì‹œë¶3',
                type: 'ë…¸íŠ¸ë¶',
                category: 'ì „ìì œí’ˆ',
                brand: 'ì‚¼ì„±',
                price: 1200000,
                specs: {
                    cpu: 'i5-1335U',
                    ram: 16,
                    storage: 512,
                    weight: 1.58
                },
                rating: 4.5,
                reviews: 152,
                year: 2023,
                features: ['ë°°ì†¡ë¬´ë£Œ', '2023ë…„ ì‹ ì œí’ˆ', 'Windows 11']
            },
            {
                id: 2,
                name: 'LG ê·¸ë¨ 16Z90R',
                type: 'ë…¸íŠ¸ë¶',
                category: 'ì „ìì œí’ˆ',
                brand: 'LG',
                price: 1350000,
                specs: {
                    cpu: 'i5-1340P',
                    ram: 16,
                    storage: 256,
                    weight: 1.19
                },
                rating: 4.7,
                reviews: 230,
                year: 2023,
                features: ['ì´ˆê²½ëŸ‰', 'ë‹¹ì¼ë°°ì†¡', '17ì‹œê°„ ë°°í„°ë¦¬']
            },
            {
                id: 3,
                name: 'ì• í”Œ ë§¥ë¶ í”„ë¡œ',
                type: 'ë…¸íŠ¸ë¶',
                category: 'ì „ìì œí’ˆ',
                brand: 'ì• í”Œ',
                price: 3500000,
                specs: {
                    cpu: 'M3',
                    ram: 16,
                    storage: 512,
                    weight: 1.55
                },
                rating: 4.9,
                reviews: 450,
                year: 2023,
                features: ['í”„ë¡œê¸‰ ì„±ëŠ¥', 'Retina ë””ìŠ¤í”Œë ˆì´', 'macOS']
            },
            {
                id: 4,
                name: 'ì‚¼ì„± ê°¤ëŸ­ì‹œë¶2',
                type: 'ë…¸íŠ¸ë¶',
                category: 'ì „ìì œí’ˆ',
                brand: 'ì‚¼ì„±',
                price: 1100000,
                specs: {
                    cpu: 'i7-1255U',
                    ram: 8,
                    storage: 256,
                    weight: 1.81
                },
                rating: 4.3,
                reviews: 89,
                year: 2022,
                features: ['êµ¬í˜• ëª¨ë¸', 'Windows 11']
            },
            // TV
            {
                id: 5,
                name: 'ì‚¼ì„± QLED 65ì¸ì¹˜',
                type: 'TV',
                category: 'ì „ìì œí’ˆ',
                brand: 'ì‚¼ì„±',
                price: 1580000,
                specs: {
                    size: 65,
                    resolution: '4K',
                    type: 'QLED',
                    smart: true
                },
                rating: 4.6,
                reviews: 342,
                year: 2023,
                features: ['ìŠ¤ë§ˆíŠ¸TV', '4K í™”ì§ˆ', 'ê²Œì„ ëª¨ë“œ']
            },
            {
                id: 6,
                name: 'LG OLED 55ì¸ì¹˜',
                type: 'TV',
                category: 'ì „ìì œí’ˆ',
                brand: 'LG',
                price: 1890000,
                specs: {
                    size: 55,
                    resolution: '4K',
                    type: 'OLED',
                    smart: true
                },
                rating: 4.8,
                reviews: 567,
                year: 2023,
                features: ['ì™„ë²½í•œ ë¸”ë™', 'AI í™”ì§ˆ ê°œì„ ', 'ìŠ¤ë§ˆíŠ¸TV']
            },
            {
                id: 7,
                name: 'ì‚¼ì„± í¬ë¦¬ìŠ¤íƒˆ UHD 50ì¸ì¹˜',
                type: 'TV',
                category: 'ì „ìì œí’ˆ',
                brand: 'ì‚¼ì„±',
                price: 680000,
                specs: {
                    size: 50,
                    resolution: '4K',
                    type: 'LED',
                    smart: true
                },
                rating: 4.3,
                reviews: 189,
                year: 2023,
                features: ['ê°€ì„±ë¹„', 'ìŠ¤ë§ˆíŠ¸TV', 'ìŒì„±ì¸ì‹']
            },
            {
                id: 8,
                name: 'LG ë‚˜ë…¸ì…€ 65ì¸ì¹˜',
                type: 'TV',
                category: 'ì „ìì œí’ˆ',
                brand: 'LG',
                price: 1450000,
                specs: {
                    size: 65,
                    resolution: '4K',
                    type: 'NanoCell',
                    smart: true
                },
                rating: 4.5,
                reviews: 234,
                year: 2023,
                features: ['ë„“ì€ ì‹œì•¼ê°', 'ìŠ¤í¬ì¸  í™”ì§ˆ ëª¨ë“œ', 'ìŠ¤ë§ˆíŠ¸TV']
            },
            // ê°€ë°©
            {
                id: 9,
                name: 'ì‚¼ì†Œë‚˜ì´íŠ¸ ë¹„ì¦ˆë‹ˆìŠ¤ ë°±íŒ©',
                type: 'ê°€ë°©',
                category: 'íŒ¨ì…˜/ì¡í™”',
                brand: 'ì‚¼ì†Œë‚˜ì´íŠ¸',
                price: 280000,
                specs: {
                    capacity: '25L',
                    material: 'ë‚˜ì¼ë¡ ',
                    laptop: '15.6ì¸ì¹˜',
                    waterproof: true
                },
                rating: 4.7,
                reviews: 445,
                year: 2023,
                features: ['ë…¸íŠ¸ë¶ ìˆ˜ë‚©', 'ë°©ìˆ˜', 'USB ì¶©ì „í¬íŠ¸']
            },
            {
                id: 10,
                name: 'ë…¸ìŠ¤í˜ì´ìŠ¤ ì—¬í–‰ìš© ìºë¦¬ì–´',
                type: 'ê°€ë°©',
                category: 'íŒ¨ì…˜/ì¡í™”',
                brand: 'ë…¸ìŠ¤í˜ì´ìŠ¤',
                price: 350000,
                specs: {
                    capacity: '40L',
                    material: 'í´ë¦¬ì¹´ë³´ë„¤ì´íŠ¸',
                    wheels: 4,
                    expandable: true
                },
                rating: 4.6,
                reviews: 328,
                year: 2023,
                features: ['ëŒ€ìš©ëŸ‰', 'í™•ì¥ ê°€ëŠ¥', 'TSA ì ê¸ˆì¥ì¹˜']
            },
            {
                id: 11,
                name: 'MCM í¬ë¡œìŠ¤ë°±',
                type: 'ê°€ë°©',
                category: 'íŒ¨ì…˜/ì¡í™”',
                brand: 'MCM',
                price: 890000,
                specs: {
                    material: 'ê°€ì£½',
                    style: 'ëŸ­ì…”ë¦¬',
                    adjustable: true
                },
                rating: 4.8,
                reviews: 156,
                year: 2023,
                features: ['ëª…í’ˆ', 'ê³ ê¸‰ ê°€ì£½', 'ë©€í‹° í¬ì¼“']
            },
            {
                id: 12,
                name: 'ë°€ë ˆ íŠ¸ë ˆí‚¹ ë°±íŒ©',
                type: 'ê°€ë°©',
                category: 'íŒ¨ì…˜/ì¡í™”',
                brand: 'ë°€ë ˆ',
                price: 180000,
                specs: {
                    capacity: '35L',
                    material: 'ë‚˜ì¼ë¡ ',
                    waterproof: true,
                    frame: true
                },
                rating: 4.5,
                reviews: 267,
                year: 2023,
                features: ['ë“±ì‚°ìš©', 'ë°©ìˆ˜', 'í†µí’ ì‹œìŠ¤í…œ']
            },
            {
                id: 13,
                name: 'ì—ì´ìŠ¤ ì—¬í–‰ìš© ë°±íŒ©',
                type: 'ê°€ë°©',
                category: 'íŒ¨ì…˜/ì¡í™”',
                brand: 'ì—ì´ìŠ¤',
                price: 320000,
                specs: {
                    capacity: '30L',
                    material: 'í´ë¦¬ì—ìŠ¤í„°',
                    laptop: '17ì¸ì¹˜',
                    expandable: true
                },
                rating: 4.4,
                reviews: 198,
                year: 2023,
                features: ['ì—¬í–‰ìš©', 'í™•ì¥ ê°€ëŠ¥', 'ë‹¤ìš©ë„']
            }
        ];

        let currentStep = 0;

        function setExample(query) {
            document.getElementById('userQuery').value = query;
            startAugmentation();
        }

        function startAugmentation() {
            const query = document.getElementById('userQuery').value;
            
            if (!query.trim()) {
                alert('ì§ˆë¬¸ì„ ì…ë ¥í•´ì£¼ì„¸ìš”!');
                return;
            }

            currentStep = 1;
            updateStepIndicator();

            setTimeout(() => showRawData(), 500);
            setTimeout(() => {
                currentStep = 2;
                updateStepIndicator();
                performFiltering(query);
            }, 2000);
            setTimeout(() => {
                currentStep = 3;
                updateStepIndicator();
                performStructuring();
            }, 4000);
            setTimeout(() => {
                currentStep = 4;
                updateStepIndicator();
                buildContext(query);
            }, 6000);
        }

        function updateStepIndicator() {
            for (let i = 1; i <= 4; i++) {
                const step = document.getElementById(`step${i}`);
                if (i <= currentStep) {
                    step.classList.add('active');
                } else {
                    step.classList.remove('active');
                }
            }
        }

        function showRawData() {
            const rawDataBox = document.getElementById('rawData');
            rawDataBox.innerHTML = '<div class="loading"><div class="spinner"></div>ê²€ìƒ‰ ì¤‘...</div>';

            setTimeout(() => {
                let rawText = '=== ë°ì´í„°ë² ì´ìŠ¤ ê²€ìƒ‰ ê²°ê³¼ ===\n\n';
                database.forEach((item, index) => {
                    rawText += `[${index + 1}] ${item.name} ${item.type} ${item.brand} ${item.price}ì› `;
                    
                    if (item.type === 'ë…¸íŠ¸ë¶') {
                        rawText += `${item.specs.cpu} ${item.specs.ram}GB RAM ${item.specs.storage}GB SSD ${item.specs.weight}kg `;
                    } else if (item.type === 'TV') {
                        rawText += `${item.specs.size}ì¸ì¹˜ ${item.specs.resolution} ${item.specs.type} `;
                    } else if (item.type === 'ê°€ë°©') {
                        rawText += `${item.specs.capacity} ${item.specs.material} `;
                    }
                    
                    rawText += `ë³„ì ${item.rating} ${item.year}ë…„ ${item.features.join(' ')} ë¦¬ë·° ${item.reviews}ê°œ\n\n`;
                });

                rawDataBox.textContent = rawText;
                
                document.getElementById('stats').style.display = 'grid';
                document.getElementById('totalItems').textContent = database.length;
            }, 1000);
        }

        function performFiltering(query) {
            const augmentedBox = document.getElementById('augmentedData');
            augmentedBox.innerHTML = '<div class="loading"><div class="spinner"></div>í•„í„°ë§ ì¤‘...</div>';

            setTimeout(() => {
                const priceMatch = query.match(/(\d+)ë§Œì›/);
                const targetPrice = priceMatch ? parseInt(priceMatch[1]) * 10000 : 2000000;
                const priceRange = targetPrice * 0.5;

                let productType = null;
                if (query.includes('ë…¸íŠ¸ë¶') || query.includes('ë©íƒ‘')) productType = 'ë…¸íŠ¸ë¶';
                if (query.includes('TV') || query.includes('í‹°ë¹„') || query.includes('í…”ë ˆë¹„ì „')) productType = 'TV';
                if (query.includes('ê°€ë°©') || query.includes('ë°±íŒ©') || query.includes('ìºë¦¬ì–´')) productType = 'ê°€ë°©';

                let brandFilter = null;
                if (query.includes('ì‚¼ì„±')) brandFilter = 'ì‚¼ì„±';
                if (query.includes('LG')) brandFilter = 'LG';
                if (query.includes('ì• í”Œ')) brandFilter = 'ì• í”Œ';

                let weightFilter = null;
                if (query.includes('ê°€ë²¼ìš´') || query.includes('ê²½ëŸ‰')) weightFilter = 'light';

                const filtered = database.filter(item => {
                    let pass = true;
                    
                    if (priceMatch) {
                        pass = pass && Math.abs(item.price - targetPrice) <= priceRange;
                    }
                    
                    if (productType) {
                        pass = pass && item.type === productType;
                    }
                    
                    if (brandFilter) {
                        pass = pass && item.brand === brandFilter;
                    }
                    
                    if (weightFilter && item.specs.weight) {
                        pass = pass && item.specs.weight < 1.5;
                    }
                    
                    return pass;
                });

                let filterText = '=== 1ë‹¨ê³„: í•„í„°ë§ ê²°ê³¼ ===\n\n';
                filterText += `âœ… í•„í„°ë§ ì¡°ê±´:\n`;
                if (priceMatch) filterText += `  - ê°€ê²©ëŒ€: ${(targetPrice/10000)}ë§Œì› Â±50%\n`;
                if (productType) filterText += `  - ì œí’ˆ íƒ€ì…: ${productType}\n`;
                if (brandFilter) filterText += `  - ë¸Œëœë“œ: ${brandFilter}\n`;
                if (weightFilter) filterText += `  - ë¬´ê²Œ: 1.5kg ë¯¸ë§Œ (ê²½ëŸ‰)\n`;
                filterText += `\nğŸ“Š ê²°ê³¼: ${database.length}ê°œ â†’ ${filtered.length}ê°œ (${database.length - filtered.length}ê°œ ì œì™¸)\n\n`;
                
                filterText += 'ì œì™¸ëœ í•­ëª©:\n';
                database.forEach(item => {
                    if (!filtered.includes(item)) {
                        let reasons = [];
                        if (productType && item.type !== productType) reasons.push(`${productType}ì´ ì•„ë‹˜`);
                        if (priceMatch && Math.abs(item.price - targetPrice) > priceRange) reasons.push('ê°€ê²©ëŒ€ ë¶ˆì¼ì¹˜');
                        if (brandFilter && item.brand !== brandFilter) reasons.push('ë¸Œëœë“œ ë¶ˆì¼ì¹˜');
                        if (weightFilter && item.specs.weight && item.specs.weight >= 1.5) reasons.push('ë¬´ê²Œ ì´ˆê³¼');
                        filterText += `  âŒ ${item.name} (${reasons.join(', ')})\n`;
                    }
                });

                filterText += '\nì„ íƒëœ í•­ëª©:\n';
                filtered.forEach(item => {
                    filterText += `  âœ… ${item.name} - ${(item.price/10000)}ë§Œì› (${item.type})\n`;
                });

                augmentedBox.textContent = filterText;
                document.getElementById('filteredItems').textContent = filtered.length;
                
                window.filteredData = filtered;
            }, 1000);
        }

        function performStructuring() {
            const augmentedBox = document.getElementById('augmentedData');
            augmentedBox.innerHTML = '<div class="loading"><div class="spinner"></div>êµ¬ì¡°í™” ì¤‘...</div>';

            setTimeout(() => {
                const filtered = window.filteredData || [];
                
                let structuredText = '=== 2ë‹¨ê³„: êµ¬ì¡°í™” ê²°ê³¼ ===\n\n';
                
                structuredText += 'ğŸ“Š ê°€ê²©ëŒ€ë³„ ë¶„ë¥˜:\n';
                const priceGroups = {};
                filtered.forEach(item => {
                    const priceRange = `${Math.floor(item.price / 100000)}0ë§Œì›ëŒ€`;
                    if (!priceGroups[priceRange]) priceGroups[priceRange] = [];
                    priceGroups[priceRange].push(item);
                });
                Object.keys(priceGroups).sort().forEach(range => {
                    structuredText += `\n[${range}]\n`;
                    priceGroups[range].forEach(item => {
                        structuredText += `  â€¢ ${item.name} (${item.type})\n`;
                    });
                });

                if (filtered.length > 0 && filtered[0].type === 'ë…¸íŠ¸ë¶') {
                    structuredText += '\n\nğŸ’¾ ì €ì¥ê³µê°„ ë¹„êµ:\n';
                    const sortedByStorage = [...filtered].sort((a, b) => b.specs.storage - a.specs.storage);
                    sortedByStorage.forEach(item => {
                        structuredText += `  ${item.specs.storage >= 512 ? 'ğŸŸ¢' : 'ğŸŸ¡'} ${item.name}: ${item.specs.storage}GB\n`;
                    });

                    structuredText += '\n\nâš–ï¸ ë¬´ê²Œ ë¹„êµ:\n';
                    const sortedByWeight = [...filtered].sort((a, b) => a.specs.weight - b.specs.weight);
                    sortedByWeight.forEach(item => {
                        structuredText += `  ${item.specs.weight < 1.3 ? 'âœ¨' : 'ğŸ“¦'} ${item.name}: ${item.specs.weight}kg\n`;
                    });
                } else if (filtered.length > 0 && filtered[0].type === 'TV') {
                    structuredText += '\n\nğŸ“º í™”ë©´ í¬ê¸°ë³„:\n';
                    const sortedBySize = [...filtered].sort((a, b) => b.specs.size - a.specs.size);
                    sortedBySize.forEach(item => {
                        structuredText += `  ğŸ“ ${item.name}: ${item.specs.size}ì¸ì¹˜ (${item.specs.type})\n`;
                    });

                    structuredText += '\n\nğŸ¨ íŒ¨ë„ íƒ€ì…ë³„:\n';
                    const typeGroups = {};
                    filtered.forEach(item => {
                        if (!typeGroups[item.specs.type]) typeGroups[item.specs.type] = [];
                        typeGroups[item.specs.type].push(item);
                    });
                    Object.keys(typeGroups).forEach(type => {
                        structuredText += `  ${type}: ${typeGroups[type].map(i => i.name).join(', ')}\n`;
                    });
                } else if (filtered.length > 0 && filtered[0].type === 'ê°€ë°©') {
                    structuredText += '\n\nğŸ’ ìš©ëŸ‰ë³„:\n';
                    filtered.forEach(item => {
                        structuredText += `  ${item.name}: ${item.specs.capacity}\n`;
                    });

                    structuredText += '\n\nğŸ’¼ ìš©ë„ë³„:\n';
                    filtered.forEach(item => {
                        let purpose = 'ì¼ë°˜';
                        if (item.features.includes('ë¹„ì¦ˆë‹ˆìŠ¤') || item.specs.laptop) purpose = 'ë¹„ì¦ˆë‹ˆìŠ¤';
                        if (item.features.includes('ì—¬í–‰ìš©')) purpose = 'ì—¬í–‰';
                        if (item.features.includes('ë“±ì‚°ìš©')) purpose = 'ì•„ì›ƒë„ì–´';
                        if (item.features.includes('ëª…í’ˆ')) purpose = 'ëŸ­ì…”ë¦¬';
                        structuredText += `  ${item.name}: ${purpose}\n`;
                    });
                }

                structuredText += '\n\nâ­ ì‚¬ìš©ì í‰ê°€:\n';
                const sortedByRating = [...filtered].sort((a, b) => b.rating - a.rating);
                sortedByRating.forEach(item => {
                    structuredText += `  ${item.rating >= 4.5 ? 'â­â­â­' : 'â­â­'} ${item.name}: ${item.rating}/5.0 (${item.reviews}ê°œ ë¦¬ë·°)\n`;
                });

                structuredText += '\n\nğŸ¢ ë¸Œëœë“œë³„:\n';
                const brandGroups = {};
                filtered.forEach(item => {
                    if (!brandGroups[item.brand]) brandGroups[item.brand] = [];
                    brandGroups[item.brand].push(item);
                });
                Object.keys(brandGroups).forEach(brand => {
                    structuredText += `  ${brand}: ${brandGroups[brand].length}ê°œ ì œí’ˆ\n`;
                });

                augmentedBox.textContent = structuredText;
                
                const avgReviews = filtered.reduce((sum, item) => sum + item.reviews, 0) / filtered.length;
                const relevance = Math.min(100, Math.round((avgReviews / 200) * 100));
                document.getElementById('relevanceScore').textContent = relevance + '%';
            }, 1000);
        }

        function buildContext(query) {
            const augmentedBox = document.getElementById('augmentedData');
            augmentedBox.innerHTML = '<div class="loading"><div class="spinner"></div>ìµœì¢… ì»¨í…ìŠ¤íŠ¸ ìƒì„± ì¤‘...</div>';

            setTimeout(() => {
                const filtered = window.filteredData || [];
                
                let contextText = '=== 3ë‹¨ê³„: AIì—ê²Œ ì „ë‹¬ë˜ëŠ” ìµœì¢… ì»¨í…ìŠ¤íŠ¸ ===\n\n';
                contextText += 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n';
                contextText += `ğŸ“Œ ì‚¬ìš©ì ì§ˆë¬¸: "${query}"\n`;
                contextText += 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n';

                contextText += 'ğŸ¯ ì¶”ì²œ ì œí’ˆ ì •ë³´:\n\n';

                filtered.forEach((item, index) => {
                    contextText += `${index + 1}. ${item.name}\n`;
                    contextText += `   ğŸ’° ê°€ê²©: ${(item.price/10000).toFixed(0)}ë§Œì›\n`;
                    contextText += `   ğŸ¢ ë¸Œëœë“œ: ${item.brand}\n`;
                    contextText += `   ğŸ“¦ ì¹´í…Œê³ ë¦¬: ${item.type}\n`;
                    
                    if (item.type === 'ë…¸íŠ¸ë¶') {
                        contextText += `   ğŸ’» ì‚¬ì–‘: ${item.specs.cpu} / RAM ${item.specs.ram}GB / SSD ${item.specs.storage}GB\n`;
                        contextText += `   âš–ï¸  ë¬´ê²Œ: ${item.specs.weight}kg\n`;
                    } else if (item.type === 'TV') {
                        contextText += `   ğŸ“º ì‚¬ì–‘: ${item.specs.size}ì¸ì¹˜ / ${item.specs.resolution} / ${item.specs.type}\n`;
                        contextText += `   ğŸ“± ìŠ¤ë§ˆíŠ¸TV: ${item.specs.smart ? 'ì§€ì›' : 'ë¯¸ì§€ì›'}\n`;
                    } else if (item.type === 'ê°€ë°©') {
                        contextText += `   ğŸ’ ì‚¬ì–‘: ${item.specs.capacity} / ${item.specs.material}\n`;
                        if (item.specs.laptop) contextText += `   ğŸ’» ë…¸íŠ¸ë¶ ìˆ˜ë‚©: ${item.specs.laptop}\n`;
                        if (item.specs.waterproof) contextText += `   ğŸ’§ ë°©ìˆ˜: ì§€ì›\n`;
                    }
                    
                    contextText += `   â­ í‰ì : ${item.rating}/5.0 (${item.reviews}ê°œ ë¦¬ë·°)\n`;
                    contextText += `   ğŸ“… ì¶œì‹œ: ${item.year}ë…„\n`;
                    contextText += `   âœ¨ íŠ¹ì§•: ${item.features.join(', ')}\n`;
                    
                    contextText += `   \n   ğŸ“Š ë¶„ì„:\n`;
                    if (item.rating >= 4.5) {
                        contextText += `      âœ… ì‚¬ìš©ì ë§Œì¡±ë„ ë§¤ìš° ë†’ìŒ\n`;
                    }
                    if (item.year >= 2023) {
                        contextText += `      âœ… ìµœì‹  ëª¨ë¸\n`;
                    }
                    if (item.reviews >= 200) {
                        contextText += `      âœ… ê²€ì¦ëœ ì œí’ˆ (ë¦¬ë·° ë‹¤ìˆ˜)\n`;
                    }
                    
                    if (item.type === 'ë…¸íŠ¸ë¶') {
                        if (item.specs.storage >= 512) {
                            contextText += `      âœ… ì €ì¥ê³µê°„ ë„‰ë„‰í•¨ (${item.specs.storage}GB)\n`;
                        }
                        if (item.specs.weight < 1.3) {
                            contextText += `      âœ… íœ´ëŒ€ì„± ìš°ìˆ˜ (${item.specs.weight}kg)\n`;
                        }
                    } else if (item.type === 'TV') {
                        if (item.specs.type === 'OLED') {
                            contextText += `      âœ… í”„ë¦¬ë¯¸ì—„ í™”ì§ˆ (OLED íŒ¨ë„)\n`;
                        }
                        if (item.specs.size >= 65) {
                            contextText += `      âœ… ëŒ€í™”ë©´ (${item.specs.size}ì¸ì¹˜)\n`;
                        }
                    } else if (item.type === 'ê°€ë°©') {
                        if (item.specs.waterproof) {
                            contextText += `      âœ… ë°©ìˆ˜ ê¸°ëŠ¥\n`;
                        }
                        if (item.specs.laptop) {
                            contextText += `      âœ… ë…¸íŠ¸ë¶ ìˆ˜ë‚© ê°€ëŠ¥\n`;
                        }
                    }
                    contextText += '\n';
                });

                contextText += 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n';
                contextText += 'ğŸ’¡ AIì—ê²Œ ì£¼ì–´ì§€ëŠ” ì§€ì‹œì‚¬í•­:\n\n';
                contextText += 'ìœ„ ì •ë³´ë¥¼ ë°”íƒ•ìœ¼ë¡œ:\n';
                contextText += '1. ì‚¬ìš©ì ìš”êµ¬ì‚¬í•­ì— ê°€ì¥ ì í•©í•œ ì œí’ˆ ì¶”ì²œ\n';
                contextText += '2. ê° ì œí’ˆì˜ ì¥ë‹¨ì  ìƒì„¸ ë¹„êµ\n';
                contextText += '3. ê°€ê²© ëŒ€ë¹„ ì„±ëŠ¥ ë¶„ì„\n';
                contextText += '4. êµ¬ì²´ì ì¸ ì„ íƒ ê°€ì´ë“œ ì œê³µ\n';
                contextText += '5. ì‚¬ìš©ì ìƒí™©ì— ë§ëŠ” ë§ì¶¤ ì¶”ì²œ\n';
                contextText += 'â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”\n\n';
                contextText += 'âœ¨ ì´ì œ ì´ ì»¨í…ìŠ¤íŠ¸ê°€ LLM(AI)ì—ê²Œ ì „ë‹¬ë˜ì–´\n';
                contextText += '   ì‚¬ìš©ìì—ê²Œ ìœ ìš©í•œ ë‹µë³€ì„ ìƒì„±í•©ë‹ˆë‹¤!';

                augmentedBox.textContent = contextText;
            }, 1000);
        }

        window.onload = function() {
            document.getElementById('rawData').textContent = 'ğŸ¯ "ì¦ê°• ê³¼ì • ì‹œì‘" ë²„íŠ¼ì„ í´ë¦­í•˜ê±°ë‚˜\nìœ„ì˜ ë¹ ë¥¸ ì˜ˆì œë¥¼ ì„ íƒí•˜ì—¬ ì²´í—˜í•´ë³´ì„¸ìš”!\n\nğŸ’¡ íŒ:\n- ë…¸íŠ¸ë¶, TV, ê°€ë°© ë“± ë‹¤ì–‘í•œ ì œí’ˆìœ¼ë¡œ í…ŒìŠ¤íŠ¸ ê°€ëŠ¥\n- ê°€ê²©, ë¸Œëœë“œ, ì¡°ê±´ ë“±ìœ¼ë¡œ ê²€ìƒ‰ ê°€ëŠ¥\n- ì§ì ‘ ì§ˆë¬¸ì„ ì…ë ¥í•´ë³¼ ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤';
            document.getElementById('augmentedData').textContent = 'ì¦ê°• ê³¼ì •ì´ ì‹œì‘ë˜ë©´\nì´ ì˜ì—­ì— ë‹¨ê³„ë³„ë¡œ ê²°ê³¼ê°€ í‘œì‹œë©ë‹ˆë‹¤.\n\në‹¨ê³„:\n1ï¸âƒ£ í•„í„°ë§ - ê´€ë ¨ ì—†ëŠ” ì •ë³´ ì œê±°\n2ï¸âƒ£ êµ¬ì¡°í™” - ì˜ë¯¸ìˆëŠ” í˜•íƒœë¡œ ì •ë¦¬\n3ï¸âƒ£ ì»¨í…ìŠ¤íŠ¸ ìƒì„± - AIìš© í”„ë¡¬í”„íŠ¸ ì™„ì„±\n\nì§€ê¸ˆ ë°”ë¡œ ì‹œì‘í•´ë³´ì„¸ìš”!';
        };
    </script>
</body>
</html>
